apiVersion: batch/v1
kind: Job
metadata:
  name: tax-engine-corrientes-padron-job # Note: Job name should match the image tag that is being tested bot-txt-70003f7-202209022017
  labels:
    app: tax-engine-corrientes-padron-job
  namespace: jx-calyx-servicios-tax-engine-database-pr-4
spec:
  template:
    spec:
      containers:
      - name: tax-engine-corrientes-padron-job
        image:  "699339193037.dkr.ecr.sa-east-1.amazonaws.com/calyx-servicios/bots:tax-engine-corrientes-padron-a7381fe-202210260725" # TODO: Change Image TAG
        imagePullPolicy: IfNotPresent
        command: ["/etc/bootstrap.sh"]
        env:
          - name: LOG_CONFIG_PATH
            value: "./app/logging.ini"
          - name: JSON_CONFIG_PATH
            value: "./app/txt/settings.json"
          - name: PG_HOST
            value: "tax-engine-database-pgbouncer"
          - name: PG_PORT
            value: "5432"
          - name: PG_DB
            value: "taxengine"
          - name: PG_USER
            value: "taxengine"
          - name: PG_PASSWORD
            value: "taxengine"
          - name: RETRO
            value: "0"
          - name: COMMAND
            value: "init"
          - name: CUIT
            value: "30703088534"
          - name: PASSWORD
            value: "meli3751"
          - name: TABLE_NAME
            value: "corrientes_padron_locales"                      
        resources:
          requests:
            cpu: "500m"
            memory: "256Mi"
      restartPolicy: Never
  backoffLimit: 2